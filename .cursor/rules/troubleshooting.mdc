---
description:
globs:
alwaysApply: false
---
# Troubleshooting Guide

## üö® Common Issues & Solutions

### YouTube API Problems

#### "API Key Invalid" Errors
1. **Check `.env` file** - Ensure `YOUTUBE_API_KEY=your_key_here`
2. **Verify API key** - Test in Google Cloud Console
3. **Enable YouTube Data API v3** in Google Cloud Console
4. **Check key restrictions** - Remove HTTP referrer restrictions for development

#### "Quota Exceeded" Errors  
1. **Review current usage** in Google Cloud Console
2. **Implement request caching** in [youtube_video_exporter.html](mdc:youtube_video_exporter.html)
3. **Reduce batch sizes** temporarily
4. **Wait for daily quota reset** (midnight Pacific Time)

#### "Channel Not Found" Errors
- **Valid formats**: 
  - `@channelhandle`
  - `https://youtube.com/@handle`
  - `https://youtube.com/channel/UC...`
  - Direct channel ID: `UCxxxxxxxxxxxxxxxxxx`

### Server Issues

#### Port Already in Use
```bash
# Find process using port 3000
lsof -i :3000

# Kill the process
kill -9 [PID]

# Or use different port
PORT=3001 npm start
```

#### Environment Variables Not Loading
1. **Check file name** - Must be `.env` (not `env.txt`)
2. **Verify location** - Must be in project root
3. **Check syntax** - No spaces around `=`
4. **Restart server** after changes

### Frontend Issues

#### Windows XP Styling Broken
- **Check CSS custom properties** in [youtube_video_exporter.html](mdc:youtube_video_exporter.html)
- **Verify border styles** - Should use `outset`/`inset`
- **Font family fallback** - Ensure Tahoma is loaded
- **Clear browser cache** for styling updates

#### Data Not Persisting
- **localStorage quota** - Check browser storage limits  
- **Clear old data** - Use browser dev tools
- **Incognito mode** - Test without extensions
- **Check domain** - localStorage is domain-specific

## üîç Debugging Techniques

### Browser Developer Tools
```javascript
// Check YouTube API responses
console.log('API Response:', response);

// Inspect stored data
console.log('Stored data:', localStorage.getItem('channelData'));

// Monitor network requests
// Network tab ‚Üí Filter by XHR/Fetch
```

### Server-Side Debugging
Add debug logging to [server.js](mdc:server.js):
```javascript
console.log('API Key length:', process.env.YOUTUBE_API_KEY?.length);
console.log('Request headers:', req.headers);
```

### Common Console Errors

#### "CORS Policy" Errors
- **Development**: Use [test-server.js](mdc:test-server.js) 
- **Production**: Ensure proper CORS headers in [server.js](mdc:server.js)

#### "Uncaught TypeError" in Analytics
- **Check data structure** - YouTube API response format changes
- **Add null checks** - Handle missing properties
- **Validate input types** - Ensure arrays vs objects

## üìä Performance Issues

### Slow API Responses
1. **Reduce batch size** from 50 to 25
2. **Add request delays** between batches
3. **Implement request queuing**
4. **Cache frequent requests**

### Memory Issues with Large Channels
```javascript
// Process in smaller chunks
const CHUNK_SIZE = 100;
for (let i = 0; i < videos.length; i += CHUNK_SIZE) {
    const chunk = videos.slice(i, i + CHUNK_SIZE);
    await processChunk(chunk);
}
```

### UI Freezing During Analysis
- **Use Web Workers** for heavy calculations
- **Implement progress callbacks**
- **Use requestAnimationFrame** for DOM updates
- **Add setTimeout breaks** in loops

## üîß Development Issues

### Node.js Version Conflicts
```bash
# Check current version
node --version

# Should be >= 14.0.0 (see package.json)
nvm use 14  # if using nvm
```

### Package Installation Problems
```bash
# Clear cache and reinstall
rm -rf node_modules package-lock.json
npm cache clean --force
npm install
```

### Hot Reloading Not Working
- **Manual refresh** required (no framework)
- **Use browser dev tools** for live CSS editing
- **Server restart** needed for [server.js](mdc:server.js) changes

## üìû Getting Help

### Error Reporting Checklist
1. **Browser and version**
2. **Node.js version** 
3. **Error messages** (full console output)
4. **Steps to reproduce**
5. **Channel URL** that caused issue (if applicable)

### Debug Information to Collect
```javascript
// Add to console for bug reports
console.log({
    userAgent: navigator.userAgent,
    localStorage: Object.keys(localStorage),
    apiKeyLength: process.env.YOUTUBE_API_KEY?.length,
    timestamp: new Date().toISOString()
});
```

### Reference Documentation
- **[docs/TROUBLESHOOTING.md](mdc:docs/TROUBLESHOOTING.md)** - Extended troubleshooting
- **[docs/API_REFERENCE.md](mdc:docs/API_REFERENCE.md)** - API specifics  
- **[docs/API_SECURITY.md](mdc:docs/API_SECURITY.md)** - Security considerations
- **[docs/USER_GUIDE.md](mdc:docs/USER_GUIDE.md)** - User-facing issues
